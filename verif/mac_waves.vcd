$date
    Jan 28, 2026  00:03:20
$end
$version
    TOOL:	xmsim(64)	25.03-s008
$end
$timescale
    1 ps
$end

$scope module tb_mac_top $end
$var parameter 32 !    DATA_WIDTH $end
$var reg       1 "    clk $end
$var reg       1 #    rst_n $end
$var reg       1 $    start $end
$var reg       1 %    clr_acc $end
$var reg      16 &    A_in [15:0] $end
$var reg      16 '    B_in [15:0] $end
$var reg      40 (    Accumulator [39:0] $end
$var reg       1 )    ready_mac $end

$scope module dut $end
$var parameter 32 *    DATA_WIDTH $end
$var wire      1 +    clk  $end
$var wire      1 ,    rst_n  $end
$var wire      1 -    start  $end
$var wire      1 .    clr_acc  $end
$var wire     16 /    A_in [15:0] $end
$var wire     16 0    B_in [15:0] $end
$var reg      40 1    Accumulator [39:0] $end
$var reg       1 2    ready_mac $end
$var reg      32 3    internal_product [31:0] $end
$var reg       1 4    mult_done $end

$scope module multiplicador_inst $end
$var parameter 32 5    DATA_WIDTH $end
$var wire      1 +    clk  $end
$var wire      1 ,    rst_n  $end
$var wire      1 -    start  $end
$var wire     16 /    m_in [15:0] $end
$var wire     16 0    q_in [15:0] $end
$var reg      32 6    result [31:0] $end
$var reg       1 7    ready $end
$var reg       1 8    load $end
$var reg       1 9    shift $end
$var reg       1 :    op_sel $end

$scope module control_unit $end
$var parameter 32 ;    DATA_WIDTH $end
$var wire      1 +    clk  $end
$var wire      1 ,    rst_n  $end
$var wire      1 -    start  $end
$var reg       1 <    load $end
$var reg       1 =    shift $end
$var reg       1 >    op_sel $end
$var reg       1 ?    ready $end
$var reg       2 @    state [1:0] $end
$var reg       2 A    next_state [1:0] $end
$var reg       5 B    bit_cnt [4:0] $end
$upscope $end


$scope module arithmetic_unit $end
$var parameter 32 C    DATA_WIDTH $end
$var wire      1 +    clk  $end
$var wire      1 ,    rst_n  $end
$var wire     16 /    m_in [15:0] $end
$var wire     16 0    q_in [15:0] $end
$var wire      1 D    load  $end
$var wire      1 E    shift  $end
$var wire      1 F    op_sel  $end
$var reg      32 G    product [31:0] $end
$var reg      17 H    A [16:0] $end
$var reg      17 I    M [16:0] $end
$var reg      16 J    Q [15:0] $end
$var reg       1 K    q_prev $end
$upscope $end

$upscope $end


$scope module acumulador_inst $end
$var wire      1 +    clk  $end
$var wire      1 ,    rst_n  $end
$var wire      1 .    clr_acc  $end
$var wire      1 L    acc_en  $end
$var wire     32 M    product_in [31:0] $end
$var reg      40 N    acc_out [39:0] $end
$var reg      40 O    current_sum [39:0] $end
$var reg      40 P    acc_reg [39:0] $end
$var reg      40 Q    product_ext [39:0] $end

$scope module mac_adder $end
$var wire     40 R    a [39:0] $end
$var wire     40 S    b [39:0] $end
$var reg      40 T    sum [39:0] $end
$upscope $end

$upscope $end

$upscope $end

$upscope $end

$enddefinitions $end
$dumpvars
b10000 C
b10000 ;
b10000 5
b10000 *
b10000 !
0"
0#
0$
0%
b0 &
b0 '
b0 (
0)
0+
0,
0-
0.
b0 /
b0 0
b0 1
02
b0 3
04
b0 6
07
08
09
0:
0<
0=
0>
0?
b0 @
b0 A
b0 B
0D
0E
0F
b0 G
b0 H
b0 I
b0 J
0K
0L
b0 M
b0 N
b0 O
b0 P
b0 Q
b0 R
b0 S
b0 T
$end
#5000
1"
1+
#10000
0"
0+
#15000
1"
1+
#20000
1#
0"
0+
1,
#25000
1"
1+
#30000
1%
0"
0+
1.
#35000
1"
1+
#40000
0%
0"
0+
0.
#45000
1"
1+
#50000
b1010 &
b101 '
0"
0+
b101 0
b1010 /
#55000
1"
1$
1-
1+
b1 A
b1 @
b10 A
#60000
0"
0+
#65000
1"
0$
0-
1+
b10 @
1>
1=
19
1:
1F
1E
#70000
0"
0+
#75000
1"
1+
b1 B
0>
0=
1>
1=
#80000
0"
0+
#85000
1"
1+
b10 B
0>
0=
1>
1=
#90000
0"
0+
#95000
1"
1+
b11 B
0>
0=
1>
1=
#100000
0"
0+
#105000
1"
1+
b100 B
0>
0=
1>
1=
#110000
0"
0+
#115000
1"
1+
b101 B
0>
0=
1>
1=
#120000
0"
0+
#125000
1"
1+
b110 B
0>
0=
1>
1=
#130000
0"
0+
#135000
1"
1+
b111 B
0>
0=
1>
1=
#140000
0"
0+
#145000
1"
1+
b1000 B
0>
0=
1>
1=
#150000
0"
0+
#155000
1"
1+
b1001 B
0>
0=
1>
1=
#160000
0"
0+
#165000
1"
1+
b1010 B
0>
0=
1>
1=
#170000
0"
0+
#175000
1"
1+
b1011 B
0>
0=
1>
1=
#180000
0"
0+
#185000
1"
1+
b1100 B
0>
0=
1>
1=
#190000
0"
0+
#195000
1"
1+
b1101 B
0>
0=
1>
1=
#200000
0"
0+
#205000
1"
1+
b1110 B
0>
0=
1>
1=
#210000
0"
0+
#215000
1"
1+
b1111 B
0>
0=
1>
1=
b11 A
#220000
0"
0+
#225000
1"
1+
b11 @
b10000 B
0>
0=
1?
b0 A
17
09
0:
0F
0E
14
12
1L
1)
#230000
0"
0+
#235000
1"
b10 &
b1111111111111101 '
b1111111111111101 0
b10 /
1+
b0 @
0?
07
04
02
0L
0)
#240000
0"
0+
#245000
1"
1$
1-
1+
b1 A
b1 @
b0 B
b10 A
#250000
0"
0+
#255000
1"
0$
0-
1+
b10 @
1>
1=
19
1:
1F
1E
#260000
0"
0+
#265000
1"
1+
b1 B
0>
0=
1>
1=
#270000
0"
0+
#275000
1"
1+
b10 B
0>
0=
1>
1=
#280000
0"
0+
#285000
1"
1+
b11 B
0>
0=
1>
1=
#290000
0"
0+
#295000
1"
1+
b100 B
0>
0=
1>
1=
#300000
0"
0+
#305000
1"
1+
b101 B
0>
0=
1>
1=
#310000
0"
0+
#315000
1"
1+
b110 B
0>
0=
1>
1=
#320000
0"
0+
#325000
1"
1+
b111 B
0>
0=
1>
1=
#330000
0"
0+
#335000
1"
1+
b1000 B
0>
0=
1>
1=
#340000
0"
0+
#345000
1"
1+
b1001 B
0>
0=
1>
1=
#350000
0"
0+
#355000
1"
1+
b1010 B
0>
0=
1>
1=
#360000
0"
0+
#365000
1"
1+
b1011 B
0>
0=
1>
1=
#370000
0"
0+
#375000
1"
1+
b1100 B
0>
0=
1>
1=
#380000
0"
0+
#385000
1"
1+
b1101 B
0>
0=
1>
1=
#390000
0"
0+
#395000
1"
1+
b1110 B
0>
0=
1>
1=
#400000
0"
0+
#405000
1"
1+
b1111 B
0>
0=
1>
1=
b11 A
#410000
0"
0+
#415000
1"
1+
b11 @
b10000 B
0>
0=
1?
b0 A
17
09
0:
0F
0E
14
12
1L
1)
#420000
0"
0+
#425000
1"
b1100100 &
b1010 '
b1010 0
b1100100 /
1+
b0 @
0?
07
04
02
0L
0)
#430000
0"
0+
#435000
1"
1$
1-
1+
b1 A
b1 @
b0 B
b10 A
#440000
0"
0+
#445000
1"
0$
0-
1+
b10 @
1>
1=
19
1:
1F
1E
#450000
0"
0+
#455000
1"
1+
b1 B
0>
0=
1>
1=
#460000
0"
0+
#465000
1"
1+
b10 B
0>
0=
1>
1=
#470000
0"
0+
#475000
1"
1+
b11 B
0>
0=
1>
1=
#480000
0"
0+
#485000
1"
1+
b100 B
0>
0=
1>
1=
#490000
0"
0+
#495000
1"
1+
b101 B
0>
0=
1>
1=
#500000
0"
0+
#505000
1"
1+
b110 B
0>
0=
1>
1=
#510000
0"
0+
#515000
1"
1+
b111 B
0>
0=
1>
1=
#520000
0"
0+
#525000
1"
1+
b1000 B
0>
0=
1>
1=
#530000
0"
0+
#535000
1"
1+
b1001 B
0>
0=
1>
1=
#540000
0"
0+
#545000
1"
1+
b1010 B
0>
0=
1>
1=
#550000
0"
0+
#555000
1"
1+
b1011 B
0>
0=
1>
1=
#560000
0"
0+
#565000
1"
1+
b1100 B
0>
0=
1>
1=
#570000
0"
0+
#575000
1"
1+
b1101 B
0>
0=
1>
1=
#580000
0"
0+
#585000
1"
1+
b1110 B
0>
0=
1>
1=
#590000
0"
0+
#595000
1"
1+
b1111 B
0>
0=
1>
1=
b11 A
#600000
0"
0+
#605000
1"
1+
b11 @
b10000 B
0>
0=
1?
b0 A
17
09
0:
0F
0E
14
12
1L
1)
#610000
0"
0+
#615000
1"
1+
b0 @
0?
07
04
02
0L
0)
#620000
0"
0+
#625000
1"
1+
b0 B
#630000
0"
0+
#635000
1"
1+
#640000
0"
0+
#645000
1"
1+
#650000
0"
0+
#655000
1"
1+
#660000
0"
0+
#665000
1"
1+
#670000
0"
0+
#675000
1"
1+
#680000
0"
0+
#685000
